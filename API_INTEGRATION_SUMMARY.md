# å‰ç«¯APIé›†æˆå®Œæˆæ€»ç»“

## âœ… å®Œæˆçš„å·¥ä½œ

### 1. å®‰è£…ä¾èµ–
```bash
âœ… npm install axios
```

### 2. åˆ›å»ºAPIæœåŠ¡å±‚

#### ğŸ“ æ–°å¢æ–‡ä»¶
```
src/api/
â”œâ”€â”€ config.ts        âœ… Axiosé…ç½®å’Œæ‹¦æˆªå™¨
â”œâ”€â”€ customer.ts      âœ… å®¢æˆ·APIæœåŠ¡
â””â”€â”€ deal.ts          âœ… äº¤æ˜“APIæœåŠ¡
```

#### ğŸ”§ config.ts é…ç½®
- âœ… APIåŸºç¡€URL: `http://localhost:8080/api`
- âœ… è¶…æ—¶æ—¶é—´: 10ç§’
- âœ… è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆè‡ªåŠ¨æ·»åŠ Authorization Tokenï¼‰
- âœ… å“åº”æ‹¦æˆªå™¨ï¼ˆç»Ÿä¸€é”™è¯¯å¤„ç†ï¼‰
- âœ… 401è‡ªåŠ¨è·³è½¬ç™»å½•é¡µ

### 3. æ›´æ–°é¡µé¢ç»„ä»¶

#### ğŸ“„ å·²æ›´æ–°çš„é¡µé¢

1. **Dashboard.vue** âœ…
   - é›†æˆ `dealApi.getStatistics()`
   - é›†æˆ `dealApi.getAll()`
   - æ˜¾ç¤ºçœŸå®çš„ç»Ÿè®¡æ•°æ®
   - æ˜¾ç¤ºæœ€è¿‘çš„äº¤æ˜“åˆ—è¡¨
   - æ·»åŠ Loadingå’ŒErrorçŠ¶æ€

2. **Customers.vue** âœ…
   - é›†æˆ `customerApi.getAll()`
   - æ”¯æŒçŠ¶æ€ç­›é€‰ï¼ˆVIP/ACTIVE/INACTIVEï¼‰
   - æ”¯æŒå…³é”®è¯æœç´¢
   - æ˜¾ç¤ºå®¢æˆ·æ€»æ•°
   - æ·»åŠ Loadingå’ŒErrorçŠ¶æ€
   - æ•°æ®æ ¼å¼åŒ–ï¼ˆè´§å¸æ˜¾ç¤ºï¼‰

3. **Deals.vue** âœ…
   - é›†æˆ `dealApi.getStatistics()`
   - é›†æˆ `dealApi.getAll({ openOnly: true })`
   - æ˜¾ç¤ºç®¡é“ç»Ÿè®¡ï¼ˆå¼€æ”¾äº¤æ˜“ã€æ€»ä»·å€¼ã€å¹³å‡é‡‘é¢ï¼‰
   - æŒ‰é˜¶æ®µåˆ†ç»„æ˜¾ç¤ºäº¤æ˜“å¡ç‰‡
   - æ·»åŠ Loadingå’ŒErrorçŠ¶æ€
   - è´§å¸æ ¼å¼åŒ–

### 4. TypeScriptç±»å‹æ”¯æŒ

âœ… **Customeræ¥å£**
```typescript
interface Customer {
  id?: number
  name: string
  email: string
  company?: string
  phone?: string
  address?: string
  status: 'VIP' | 'ACTIVE' | 'INACTIVE'
  totalDeals?: number
  totalValue?: string
  createdAt?: string
  updatedAt?: string
}
```

âœ… **Dealæ¥å£**
```typescript
interface Deal {
  id?: number
  title: string
  customerId: number
  amount: number
  stage: 'QUALIFICATION' | 'PROPOSAL' | 'NEGOTIATION' | 'WON' | 'LOST'
  probability?: number
  ownerName?: string
  expectedCloseDate?: string
  actualCloseDate?: string
  description?: string
  createdAt?: string
  updatedAt?: string
}
```

---

## ğŸ¯ APIç«¯ç‚¹æ˜ å°„

### Customer API
| å‰ç«¯æ–¹æ³• | HTTPè¯·æ±‚ | åç«¯ç«¯ç‚¹ | é¡µé¢ä½¿ç”¨ |
|---------|---------|---------|---------|
| `customerApi.getAll()` | GET | `/api/customers` | Customers.vue âœ… |
| `customerApi.getById(id)` | GET | `/api/customers/{id}` | - |
| `customerApi.create(data)` | POST | `/api/customers` | - |
| `customerApi.update(id, data)` | PUT | `/api/customers/{id}` | - |
| `customerApi.delete(id)` | DELETE | `/api/customers/{id}` | - |

### Deal API
| å‰ç«¯æ–¹æ³• | HTTPè¯·æ±‚ | åç«¯ç«¯ç‚¹ | é¡µé¢ä½¿ç”¨ |
|---------|---------|---------|---------|
| `dealApi.getAll()` | GET | `/api/deals` | Dashboard.vue âœ…, Deals.vue âœ… |
| `dealApi.getStatistics()` | GET | `/api/deals/statistics` | Dashboard.vue âœ…, Deals.vue âœ… |
| `dealApi.getById(id)` | GET | `/api/deals/{id}` | - |
| `dealApi.create(data)` | POST | `/api/deals` | - |
| `dealApi.update(id, data)` | PUT | `/api/deals/{id}` | - |
| `dealApi.delete(id)` | DELETE | `/api/deals/{id}` | - |

---

## ğŸ”„ æ•°æ®æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vueç»„ä»¶    â”‚
â”‚ onMounted() â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ è°ƒç”¨API
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ customerApi  â”‚
â”‚  / dealApi   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ Axios HTTP Request
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¯·æ±‚æ‹¦æˆªå™¨       â”‚
â”‚ +Authorization   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åç«¯API        â”‚
â”‚ localhost:8080   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ JSON Response
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å“åº”æ‹¦æˆªå™¨       â”‚
â”‚ æå–dataå­—æ®µ     â”‚
â”‚ é”™è¯¯å¤„ç†         â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Vueç»„ä»¶        â”‚
â”‚ æ›´æ–°å“åº”å¼æ•°æ®   â”‚
â”‚ æ¸²æŸ“UI          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ ç”¨æˆ·ä½“éªŒå¢å¼º

### LoadingçŠ¶æ€
```vue
<div v-if="loading" class="loading-container">
  <div class="loading-text">Loading customers...</div>
</div>
```

### é”™è¯¯å¤„ç†
```vue
<div v-else-if="error" class="error-container">
  <div class="error-text">{{ error }}</div>
  <button @click="loadCustomers" class="btn btn-secondary">Retry</button>
</div>
```

### ç©ºæ•°æ®çŠ¶æ€
```vue
<div v-if="customers.length === 0" class="empty-state">
  <p>No customers found</p>
</div>
```

---

## ğŸ§ª æµ‹è¯•æ­¥éª¤

### å‰ç½®æ¡ä»¶
1. âœ… åç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:8080`
2. âœ… æ•°æ®åº“å·²å¯¼å…¥ç¤ºä¾‹æ•°æ®
3. âœ… å‰ç«¯æœåŠ¡è¿è¡Œåœ¨ `http://localhost:5173`

### æµ‹è¯•æµç¨‹

#### 1. æµ‹è¯•Dashboard
```
1. è®¿é—® http://localhost:5173
2. ç‚¹å‡»ç™»å½•ï¼ˆç›´æ¥è¿›å…¥ï¼‰
3. åº”è¯¥çœ‹åˆ°ï¼š
   âœ… ç»Ÿè®¡å¡ç‰‡æ˜¾ç¤ºçœŸå®æ•°æ®
   âœ… å¼€æ”¾äº¤æ˜“æ•°é‡
   âœ… æ€»ä»·å€¼
   âœ… å¹³å‡äº¤æ˜“é‡‘é¢
   âœ… æœ€è¿‘äº¤æ˜“åˆ—è¡¨
```

#### 2. æµ‹è¯•Customers
```
1. ç‚¹å‡»ä¾§è¾¹æ  "Customers"
2. åº”è¯¥çœ‹åˆ°ï¼š
   âœ… å®¢æˆ·åˆ—è¡¨ï¼ˆ5ä¸ªç¤ºä¾‹å®¢æˆ·ï¼‰
   âœ… å®¢æˆ·ä¿¡æ¯ï¼ˆå§“åã€é‚®ç®±ã€å…¬å¸ï¼‰
   âœ… äº¤æ˜“æ•°é‡å’Œæ€»é‡‘é¢
   âœ… çŠ¶æ€å¾½ç« ï¼ˆVIPçº¢è‰²ã€Activeç»¿è‰²ï¼‰
   
3. æµ‹è¯•ç­›é€‰ï¼š
   âœ… ç‚¹å‡» "VIP" - æ˜¾ç¤ºVIPå®¢æˆ·
   âœ… ç‚¹å‡» "ACTIVE" - æ˜¾ç¤ºæ´»è·ƒå®¢æˆ·
   âœ… ç‚¹å‡» "ALL" - æ˜¾ç¤ºæ‰€æœ‰å®¢æˆ·
   
4. æµ‹è¯•æœç´¢ï¼š
   âœ… è¾“å…¥ "Acme" - æ˜¾ç¤ºAcmeå…¬å¸å®¢æˆ·
   âœ… è¾“å…¥ "John" - æ˜¾ç¤ºJohnå®¢æˆ·
```

#### 3. æµ‹è¯•Deals
```
1. ç‚¹å‡»ä¾§è¾¹æ  "Deals"
2. åº”è¯¥çœ‹åˆ°ï¼š
   âœ… ç»Ÿè®¡å¡ç‰‡ï¼ˆå¼€æ”¾äº¤æ˜“ã€æ€»ä»·å€¼ã€å¹³å‡é‡‘é¢ï¼‰
   âœ… ä¸‰åˆ—ç®¡é“è§†å›¾
   âœ… QUALIFICATIONåˆ—çš„äº¤æ˜“
   âœ… PROPOSALåˆ—çš„äº¤æ˜“
   âœ… NEGOTIATIONåˆ—çš„äº¤æ˜“
   âœ… æ¯ä¸ªäº¤æ˜“å¡ç‰‡æ˜¾ç¤ºæ ‡é¢˜ã€é‡‘é¢ã€è´Ÿè´£äºº
```

---

## ğŸ› æ•…éšœæ’æŸ¥

### é—®é¢˜1: é¡µé¢æ˜¾ç¤º"Failed to load"
**åŸå› **: åç«¯æœªå¯åŠ¨  
**è§£å†³**:
```bash
cd crm-backend
mvn spring-boot:run
```

### é—®é¢˜2: CORSé”™è¯¯
**åŸå› **: è·¨åŸŸé…ç½®é—®é¢˜  
**æ£€æŸ¥**: 
- åç«¯ `WebConfig.java` å·²é…ç½®å…è®¸ `http://localhost:5173`
- âœ… å·²é…ç½®

### é—®é¢˜3: 401 Unauthorized
**åŸå› **: è®¤è¯é—®é¢˜  
**è¯´æ˜**: å½“å‰ç‰ˆæœ¬ä½¿ç”¨localStorageæ¨¡æ‹Ÿç™»å½•ï¼ŒJWTè®¤è¯å¾…å®ç°

### é—®é¢˜4: æ•°æ®æ ¼å¼é”™è¯¯
**æ£€æŸ¥**:
```javascript
// æµè§ˆå™¨ConsoleæŸ¥çœ‹APIå“åº”
console.log(response)

// ç¡®è®¤å“åº”æ ¼å¼ï¼š
{
  success: true,
  data: [...],
  total: 5
}
```

---

## ğŸš€ åç»­å¼€å‘å»ºè®®

### é«˜ä¼˜å…ˆçº§
- [ ] å®ç°åˆ›å»ºå®¢æˆ·è¡¨å•å¯¹è¯æ¡†
- [ ] å®ç°ç¼–è¾‘å®¢æˆ·åŠŸèƒ½
- [ ] å®ç°åˆ é™¤ç¡®è®¤å¯¹è¯æ¡†
- [ ] å®ç°åˆ›å»ºäº¤æ˜“åŠŸèƒ½
- [ ] æ·»åŠ çœŸå®çš„ç”¨æˆ·è®¤è¯ï¼ˆJWTï¼‰

### ä¸­ä¼˜å…ˆçº§
- [ ] æ·»åŠ åˆ†é¡µåŠŸèƒ½
- [ ] æ·»åŠ é«˜çº§ç­›é€‰
- [ ] å®ç°äº¤æ˜“æ‹–æ‹½ç§»åŠ¨é˜¶æ®µ
- [ ] æ·»åŠ æ•°æ®åˆ·æ–°æŒ‰é’®
- [ ] ä¼˜åŒ–é”™è¯¯æç¤ºï¼ˆToasté€šçŸ¥ï¼‰

### ä½ä¼˜å…ˆçº§
- [ ] æ·»åŠ æ•°æ®ç¼“å­˜
- [ ] å®ç°ä¹è§‚æ›´æ–°
- [ ] æ·»åŠ éª¨æ¶å±Loading
- [ ] å®ç°æ— é™æ»šåŠ¨

---

## ğŸ“ å®Œæ•´çš„é¡¹ç›®æ–‡ä»¶ç»“æ„

```
crm-system/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    âœ… æ–°å¢
â”‚   â”‚   â”œâ”€â”€ config.ts          âœ… Axiosé…ç½®
â”‚   â”‚   â”œâ”€â”€ customer.ts        âœ… å®¢æˆ·API
â”‚   â”‚   â””â”€â”€ deal.ts            âœ… äº¤æ˜“API
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â””â”€â”€ Sidebar.vue        âœ… ä¾§è¾¹æ 
â”‚   â”œâ”€â”€ layouts/
â”‚   â”‚   â””â”€â”€ MainLayout.vue     âœ… ä¸»å¸ƒå±€
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â”œâ”€â”€ Dashboard.vue      âœ… å·²æ›´æ–°
â”‚   â”‚   â”œâ”€â”€ Customers.vue      âœ… å·²æ›´æ–°
â”‚   â”‚   â”œâ”€â”€ Deals.vue          âœ… å·²æ›´æ–°
â”‚   â”‚   â”œâ”€â”€ Reports.vue        âœ… é™æ€
â”‚   â”‚   â”œâ”€â”€ Settings.vue       âœ… é™æ€
â”‚   â”‚   â”œâ”€â”€ Login.vue          âœ… å®Œæˆ
â”‚   â”‚   â””â”€â”€ Logout.vue         âœ… å®Œæˆ
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.ts           âœ… è·¯ç”±é…ç½®
â”‚   â”œâ”€â”€ styles/
â”‚   â”‚   â”œâ”€â”€ variables.scss     âœ… è®¾è®¡å˜é‡
â”‚   â”‚   â””â”€â”€ global.scss        âœ… å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ App.vue                âœ… æ ¹ç»„ä»¶
â”‚   â””â”€â”€ main.ts                âœ… å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json               âœ… ä¾èµ–é…ç½®
â”œâ”€â”€ vite.config.ts             âœ… Viteé…ç½®
â”œâ”€â”€ README.md                  âœ… é¡¹ç›®æ–‡æ¡£
â””â”€â”€ FRONTEND_API_GUIDE.md      âœ… APIä½¿ç”¨æ–‡æ¡£
```

---

## ğŸ“Š é›†æˆçŠ¶æ€

| åŠŸèƒ½æ¨¡å— | å‰ç«¯å®ç° | APIé›†æˆ | çŠ¶æ€ |
|---------|---------|---------|------|
| ç”¨æˆ·ç™»å½• | âœ… | â³ JWTå¾…å®ç° | ğŸŸ¡ éƒ¨åˆ†å®Œæˆ |
| ç”¨æˆ·ç™»å‡º | âœ… | â³ | ğŸŸ¡ éƒ¨åˆ†å®Œæˆ |
| Dashboard | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| å®¢æˆ·åˆ—è¡¨ | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| å®¢æˆ·ç­›é€‰ | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| å®¢æˆ·æœç´¢ | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| å®¢æˆ·åˆ›å»º | â³ | âœ… | ğŸŸ¡ APIå°±ç»ª |
| å®¢æˆ·ç¼–è¾‘ | â³ | âœ… | ğŸŸ¡ APIå°±ç»ª |
| å®¢æˆ·åˆ é™¤ | â³ | âœ… | ğŸŸ¡ APIå°±ç»ª |
| äº¤æ˜“åˆ—è¡¨ | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| äº¤æ˜“ç»Ÿè®¡ | âœ… | âœ… | ğŸŸ¢ å®Œæˆ |
| äº¤æ˜“åˆ›å»º | â³ | âœ… | ğŸŸ¡ APIå°±ç»ª |
| äº¤æ˜“ç¼–è¾‘ | â³ | âœ… | ğŸŸ¡ APIå°±ç»ª |
| æŠ¥è¡¨æŸ¥çœ‹ | âœ… | â³ | ğŸŸ¡ é™æ€æ•°æ® |
| ç³»ç»Ÿè®¾ç½® | âœ… | â³ | ğŸŸ¡ é™æ€æ•°æ® |

**å›¾ä¾‹**:
- ğŸŸ¢ å®Œå…¨å®Œæˆ
- ğŸŸ¡ éƒ¨åˆ†å®Œæˆ
- â³ å¾…å®ç°

---

## ğŸ‰ æ€»ç»“

### âœ… å·²å®Œæˆ
1. **APIæœåŠ¡å±‚** - å®Œæ•´çš„axiosé…ç½®å’ŒAPIå°è£…
2. **TypeScriptç±»å‹** - å®Œæ•´çš„ç±»å‹å®šä¹‰
3. **ä¸‰ä¸ªæ ¸å¿ƒé¡µé¢** - Dashboardã€Customersã€Dealså®Œå…¨é›†æˆ
4. **é”™è¯¯å¤„ç†** - ç»Ÿä¸€çš„é”™è¯¯å¤„ç†å’ŒçŠ¶æ€ç®¡ç†
5. **ç”¨æˆ·ä½“éªŒ** - LoadingçŠ¶æ€ã€é”™è¯¯æç¤ºã€ç©ºæ•°æ®æç¤º

### ğŸ¯ æ ¸å¿ƒä»·å€¼
- âœ… å‰åç«¯æ‰“é€šï¼Œæ•°æ®å®æ—¶åŒæ­¥
- âœ… ç±»å‹å®‰å…¨ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
- âœ… ä»£ç å¤ç”¨ï¼ŒAPIç»Ÿä¸€ç®¡ç†
- âœ… ç”¨æˆ·ä½“éªŒè‰¯å¥½ï¼ŒçŠ¶æ€åé¦ˆåŠæ—¶

### ğŸ“š ç›¸å…³æ–‡æ¡£
1. **FRONTEND_API_GUIDE.md** - å‰ç«¯APIä½¿ç”¨æŒ‡å—
2. **PROJECT_OVERVIEW.md** - é¡¹ç›®æ€»è§ˆ
3. **BUSINESS_FLOWS.md** - ä¸šåŠ¡æµç¨‹
4. **crm-backend/README.md** - åç«¯æ–‡æ¡£
5. **crm-backend/API_TESTING.md** - APIæµ‹è¯•æ–‡æ¡£

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**å®Œæˆæ—¶é—´**: 2026-02-02  
**é›†æˆçŠ¶æ€**: âœ… æ ¸å¿ƒåŠŸèƒ½å·²å®Œæˆ
